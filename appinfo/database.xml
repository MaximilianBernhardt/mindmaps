<?xml version="1.0"?>
<database xmlns:xsi= "http://www.w3.org/2001/XMLSchema-instance"
      xsi:noNamespaceSchemaLocation="https://apps.nextcloud.com/schema/apps/database.xsd">
    <name>*dbname*</name>
    <create>true</create>
    <overwrite>false</overwrite>
    <charset>utf8</charset>
    <table>
        <name>*dbprefix*mindmaps</name>
        <declaration>
            <field>
                <name>id</name>
                <type>integer</type>
                <length>6</length>
                <notnull>true</notnull>
                <autoincrement>true</autoincrement>
                <primary>true</primary>
            </field>
            <field>
                <name>title</name>
                <type>text</type>
                <length>255</length>
                <notnull>true</notnull>
            </field>
            <field>
                <name>description</name>
                <type>text</type>
                <length>255</length>
                <notnull>false</notnull>
            </field>
            <field>
                <name>user_id</name>
                <type>text</type>
                <length>64</length>
                <notnull>true</notnull>
            </field>
            <index>
                <name>mindmaps_user_id_idx</name>
                <field>
                    <name>user_id</name>
                </field>
            </index>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*mindmap_nodes</name>
        <declaration>
            <field>
                <name>id</name>
                <type>integer</type>
                <length>6</length>
                <notnull>true</notnull>
                <autoincrement>true</autoincrement>
                <primary>true</primary>
            </field>
            <!-- Foreign Key mindmap::id -->
            <field>
                <name>mindmap_id</name>
                <type>integer</type>
                <length>6</length>
                <notnull>true</notnull>
            </field>
            <!-- Foreign Key mindmap_nodes::id -->
            <field>
                <name>parent_id</name>
                <type>integer</type>
                <length>6</length>
                <notnull>false</notnull>
            </field>
            <!-- Foreign Key users::uid -->
            <field>
                <name>user_id</name>
                <type>text</type>
                <length>64</length>
                <notnull>true</notnull>
            </field>
            <field>
                <name>x</name>
                <type>integer</type>
                <length>6</length>
                <notnull>true</notnull>
                <default>0</default>
            </field>
            <field>
                <name>y</name>
                <type>integer</type>
                <length>6</length>
                <notnull>true</notnull>
                <default>0</default>
            </field>
            <field>
                <name>label</name>
                <type>text</type>
                <length>255</length>
                <notnull>false</notnull>
            </field>
            <!-- Foreign Key users::uid -->
            <field>
                <name>locked_by</name>
                <type>text</type>
                <length>64</length>
                <notnull>false</notnull>
            </field>
            <index>
                <name>mindmap_nodes_mmid_idx</name>
                <field>
                    <name>mindmap_id</name>
                </field>
            </index>
        </declaration>
    </table>
    <table>
        <name>*dbprefix*mindmap_acl</name>
        <declaration>
            <field>
                <name>id</name>
                <type>integer</type>
                <length>6</length>
                <notnull>true</notnull>
                <autoincrement>true</autoincrement>
                <primary>true</primary>
            </field>
            <!-- Foreign Key mindmap::id -->
            <field>
                <name>mindmap_id</name>
                <type>integer</type>
                <length>6</length>
                <notnull>true</notnull>
            </field>
            <field>
                <name>type</name>
                <type>integer</type>
                <length>4</length>
                <notnull>true</notnull>
            </field>
            <field>
                <name>participant</name>
                <type>text</type>
                <length>64</length>
                <notnull>true</notnull>
            </field>
            <index>
                <name>mindmap_acl_mmid_idx</name>
                <field>
                    <name>mindmap_id</name>
                </field>
            </index>
        </declaration>
    </table>
</database>
